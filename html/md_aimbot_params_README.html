<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GAEMI0: 1. 개요</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gaemi2.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GAEMI0
   &#160;<span id="projectnumber">0.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_aimbot_params_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><ol type="1">
<li>개요 </li>
</ol>
</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>로봇이 운용되면서 사용하는 모든 파라미터는 이 리포지토리에 정리한다. 최종적으로, 새로운 로봇이 처음 세팅되거나 새로운 사이트에 로봇을 도입할때, 이 리포지토리만 편집하면 모든 세팅이 끝나도록 하는 것이 목표이다.</p><ul>
<li>(1.8세대 하드웨어 기준) NUC에서 사용하는 모든 패키지의 <code>launch</code> 파일에서는 이 리포지토리의 파라미터를 불러와서 사용하도록 세팅되어있다.</li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
1.1. 파라미터의 구성</h1>
<p>로봇에 있어서 관리되어야하는 파라미터는 크게 3가지로 구분된다.</p><ul>
<li><b>로봇 파라미터</b> : 로봇의 개별적 세팅 정보에 관한 파라미터<ul>
<li><code>ROBOT_ID</code>, <code>ROBOT_IP</code>, <code>HW_VERSION</code>...</li>
</ul>
</li>
<li><b>하드웨어 파라미터</b> : 로봇의 하드웨어의 특징에 따라 달라지는 파라미터. 어떤 사이트에 도입되는지와는 관련이 없는 파라미터<ul>
<li><code>wheel_radius</code>, <code>wheel_separation</code>...</li>
</ul>
</li>
<li><b>서비스 파라미터</b> : 서비스를 수행하는데 있어 그 행동에 사용되는 파라미터. 이 파라미터는 하드웨어와 사이트 모두에 의존하는 경우가 많다.<ul>
<li><code>service_options</code>, <code>knock_position_rate</code>, <code>knock_cnt</code>, <code>push_offset</code></li>
</ul>
</li>
<li><b>사이트 파라미터</b> : 도입하는 사이트에 관련된 데이터. 어떤 로봇을 사용하는지에 따라 달라지지 않는 파라미터<ul>
<li><code>map</code>, <code>poi</code>, <code>button</code>...</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
1.2 Todo 리스트</h1>
<ul>
<li>모든 로봇, 사이트에 관련된 데이터가 모여있지 않고, 서버에서 버전관리되고 있는 파일 리스트를 받아오는 방식으로 변경</li>
<li>aimbot_site_xavier와 통합 (하드웨어 2세대에서 xavier통합시기에 맞추어서 통합)</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
2. 사전 작업</h1>
<h2><a class="anchor" id="autotoc_md12"></a>
2.1. 환경변수 세팅</h2>
<p><code>~/.bashrc</code> 파일에 아래 구문 추가. (아래의 예시는 로봇의 시리얼번호가 <code>GAEMI0G150007</code>일 경우) </p><div class="fragment"><div class="line">##### Set GAEMI0 ENV  ####</div>
<div class="line">export ROBOT_ID=GAEMI0G150007     # 로봇별로 시리얼번호를 세팅</div>
<div class="line">## Setup Robot Envonments</div>
<div class="line">export ROBOT_ENV_PATH=$ROS2_WS/install/aimbot_params/share/aimbot_params/robot</div>
<div class="line">if [ -f ~/$ROBOT_ENV_PATH/$ROBOT_ID ]; then</div>
<div class="line">    echo &quot;loaded ROBOT_ID &lt;$ROBOT_ID&gt; env file.&quot;</div>
<div class="line">    source ~/$ROBOT_ENV_PATH/$ROBOT_ID</div>
<div class="line">else</div>
<div class="line">    echo &quot;[ERROR] failed to find ROBOT_ID &lt;$ROBOT_ID&gt; env file.&quot;</div>
<div class="line">fi</div>
<div class="line">## Setup Site Envonments</div>
<div class="line">export SITE_ENV_PATH=$ROS2_WS/install/aimbot_params/share/aimbot_params/site/$MAP_SITE</div>
<div class="line">if [ -f ~/$SITE_ENV_PATH/site_info ]; then</div>
<div class="line">    echo &quot;loaded SITE &lt;$MAP_SITE&gt; env file.&quot;</div>
<div class="line">    source ~/$SITE_ENV_PATH/site_info</div>
<div class="line">else</div>
<div class="line">    echo &quot;[ERROR] failed to find SITE &lt;$MAP_SITE&gt; env file.&quot;</div>
<div class="line">fi</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md13"></a>
3. 디렉토리 구성 및 설명</h1>
<p>이 리포지토리의 파라미터 디렉토리는 아래와 같이 구성된다. </p><div class="fragment"><div class="line">.</div>
<div class="line">├── robot/</div>
<div class="line">│   ├── [로봇아이디]    &lt;--환경변수 파일</div>
<div class="line">│   └── ...</div>
<div class="line">├── hw</div>
<div class="line">│   ├── _default/</div>
<div class="line">│   ├── _templates/</div>
<div class="line">│   ├── [로봇아이디]/</div>
<div class="line">│   └── ...</div>
<div class="line">├── site/</div>
<div class="line">│   ├── _default/</div>
<div class="line">│   ├── [사이트이름]/</div>
<div class="line">│   └── ...</div>
<div class="line">└── service/</div>
<div class="line">│   ├── _default/</div>
<div class="line">    ├── [사이트이름]/</div>
<div class="line">    │   └── [로봇아이디]/</div>
<div class="line">    └── ...</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md14"></a>
3.1. robot</h2>
<p>로봇의 각종 ROS node를 실행하는데 설정하는 환경변수를 설정한다. 하드웨어 버전, ip, 어떤 사이트의 파라미터 세트를 쓸 것인지 등을 설정한다. 각 파일의 이름은 <code>ROBOT_ID</code>로 설정하고, <a href="#21-환경변수-세팅">2.1. 환경변수 세팅</a>에서 환경변수로 로봇아이디를 설정하게 되면 해당 로봇아이디에 맞는 환경변수를 세팅하게된다.</p><ul>
<li><code>GAEMI0G200025</code> <div class="fragment"><div class="line">####################</div>
<div class="line"># ROBOTIS GAEMI-0 ROBOT PARAMETERS</div>
<div class="line">####################</div>
<div class="line"> </div>
<div class="line">##### ROBOT information</div>
<div class="line">## ROBOT_IP : 로봇 LTE IP</div>
<div class="line">export ROBOT_IP=&#39;223.171.41.44&#39;</div>
<div class="line"> </div>
<div class="line">## HW_VERSION : 하드웨어 버전</div>
<div class="line">export HW_VERSION=G2</div>
<div class="line">export CARGO_TYPE=drawer</div>
<div class="line"># drawer, swing_door, tray</div>
<div class="line"> </div>
<div class="line">## LIDAR_MODEL : 라이다 모델</div>
<div class="line"># LAKIBEAM, S2</div>
<div class="line">export LIDAR_MODEL=S2</div>
<div class="line"> </div>
<div class="line">##### SITE information</div>
<div class="line">## MAP_SITE : 맵 정보를 관리하는 사이트</div>
<div class="line">export MAP_SITE=robotis</div>
<div class="line"> </div>
<div class="line">## SERVICE_SITE : 서비스를 진행하는 사이트</div>
<div class="line"># robotis, hotel_fair, hotel_fair_patrol</div>
<div class="line"># hennna, marriott, seoul, kiria, newseoul, mayfield</div>
<div class="line">export SERVICE_SITE=robotis</div>
<div class="line"> </div>
<div class="line">## ROBOT_NUM : 해당 사이트에서 복수 로봇 서비스시 로봇 번호</div>
<div class="line"># 1, 2, 3...</div>
<div class="line">export ROBOT_NUM=3</div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p>여기서 <code>MAP_SITE</code>는 <code>aimbot_params/site</code>의 폴더이름과 같아야하며, <code>SERVICE_SITE</code>는 <code>aimbot_params/service</code>의 폴더이름과 같아야한다. </p>
</blockquote>
<blockquote class="doxtable">
<p><code>ROBOT_NUM</code>은 <code>aimbot_params/site/{사이트이름}/map/station.yaml</code>에서 어떤 도킹스테이션을 사용하는지 결정하는데 사용된다. </p>
</blockquote>
<blockquote class="doxtable">
<p><code>LIDAR_MODEL</code>은 <code>aimbot_base/aimbot_bringup/launch/lidar.launch</code>에서 G20의 라이다 모델을 결정하는데 사용된다. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md15"></a>
3.2. hw</h2>
<p>로봇의 하드웨어에 관련된 파라미터를 저장한다. 여기에 저장하는 파라미터는 하드웨어를 어떤 사이트에 넣는지에 관계없이 하드웨어에만 의존하는 파라미터이다. 하지만, 특정 사이트에 들어갔을때 바닥제질, 벽의 반사도 등 특별한 변수가 발생하였을 경우, 수정하는 것도 허용한다. 디렉토리의 구성은 아래와 같다. </p><div class="fragment"><div class="line">hw/</div>
<div class="line">├── default_g15/</div>
<div class="line">│   ├── controller.yaml</div>
<div class="line">│   ├── docking.yaml</div>
<div class="line">│   ├── laser_scan_filter.yaml</div>
<div class="line">│   ├── lidar.yaml</div>
<div class="line">│   ├── realsense.yaml</div>
<div class="line">│   └── simple_mobile_path_planner.yaml</div>
<div class="line">├── default_G18/</div>
<div class="line">│   ├── controller.yaml</div>
<div class="line">│   ├── docking.yaml</div>
<div class="line">│   ├── laser_scan_filter.yaml</div>
<div class="line">│   ├── lidar.yaml</div>
<div class="line">│   ├── realsense.yaml</div>
<div class="line">│   └── simple_mobile_path_planner.yaml</div>
<div class="line">├── [로봇아이디1]/</div>
<div class="line">├── [로봇아이디2]/</div>
</div><!-- fragment --><p>기본적으로 같이 세대의 로봇은 설정파일이 크게 다르지 않기때문에 1.5세대와 1.8세대 각각에 대해 default 파라미터 세트를 구성해두었고, 새로운 로봇이 만들어지면 이 파라미터 세트를 기준으로 새로운 폴더를 만들어주면 된다.</p>
<ul>
<li><code>controller.yaml</code> : <code>bringup</code>에서 <code>diff_drive_controller</code>를 실행할때 사용하는 파라미터.</li>
<li><code>docking.yaml</code> : <code><a class="el" href="namespacedocking__manager.html">docking_manager</a></code>노드에서 도킹할때 사용하는 파라미터.</li>
<li><code>laser_scan_filter.yaml</code> : <code>laser_scan_filter</code>노드에서 라이다의 스캔데이터를 필터링 하는데 사용하는 파라미터.</li>
<li><code>lidar.yaml</code> : Hokuyo(1.5세대), S2(1.8세대, 2.0세대), Lakibeam(2.0세대, 3.0세대)의 라이다 노드를 실행할때 필요한 파라미터.</li>
<li><code>realsense.yaml</code> : <code>realsense wrapper</code>를 실행할때 필요한 파라미터.</li>
<li><code>simple_mobile_path_planner.yaml</code> : <code><a class="el" href="namespacesimple__mobile__path__planner.html">simple_mobile_path_planner</a></code>노드에서 사용하는 파라미터.</li>
</ul>
<blockquote class="doxtable">
<p>각 로봇 폴더에 <code>realsense.yaml</code> 파일을 만들지 않았을 경우 <code>default</code> 폴더의 <code>realsense.yaml</code> 파일의 파라미터를 참조한다. 하지만 다른 yaml파일의 경우는 각 로봇 폴더에 반드시 yaml파일이 존재해야한다. realsense의 경우 아예 사용하지 않는 모델이 존재할 수도 있기때문에 이와 같이 특별히 취급하였다. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md16"></a>
3.3. site</h2>
<p>각 사이트에 의존하는 파라미터를 모두 저장한다. 여기의 데이터는 로봇이 변함에 상관없이 한 사이트에서 공통적으로 사용할 파라미터이다. 사이트에 로봇을 처음도입할때 설정해야하며, 그 이후로 로봇이 바뀌더라도 따로 변경될 필요는 없다. 아래와 같은 디렉토리 구성을 가진다. </p><div class="fragment"><div class="line">site/</div>
<div class="line">├── default</div>
<div class="line">│   ├── gui/</div>
<div class="line">│   │   ├── images/</div>
<div class="line">│   │   └── localizations/</div>
<div class="line">│   ├── sound/</div>
<div class="line">│   │   ├── cn/</div>
<div class="line">│   │   ├── en/</div>
<div class="line">│   │   ├── jp/</div>
<div class="line">│   │   ├── ko/</div>
<div class="line">│   │   ├── error.mp3</div>
<div class="line">│   │   ├── info.mp3</div>
<div class="line">│   │   └── warn.mp3</div>
<div class="line">│   ├── vio/</div>
<div class="line">│   │   ├── ...</div>
<div class="line">│   │   └── ...</div>
<div class="line">│   └── aimbot.rviz</div>
<div class="line">├── [사이트 이름1]</div>
<div class="line">│   ├── site_info      &lt;-- 환경변수 파일</div>
<div class="line">│   ├── gui/</div>
<div class="line">│   │   ├── ...</div>
<div class="line">│   │   └── ...</div>
<div class="line">│   ├── map/</div>
<div class="line">│   │   ├── destinations/</div>
<div class="line">│   │   │   ├── [목적지1].yaml</div>
<div class="line">│   │   │   └── [목적지2].yaml</div>
<div class="line">│   │   ├── ev/</div>
<div class="line">│   │   │   ├── ev1.yaml</div>
<div class="line">│   │   │   ├── ev2.yaml</div>
<div class="line">│   │   │   └── ...</div>
<div class="line">│   │   ├── gate/</div>
<div class="line">│   │   │   └── security_door.yaml</div>
<div class="line">│   │   ├── maps/</div>
<div class="line">│   │   │   ├── map_info.yaml</div>
<div class="line">│   │   │   ├── 1st_floor.png</div>
<div class="line">│   │   │   ├── 1st_floor.yaml</div>
<div class="line">│   │   │   ├── ...</div>
<div class="line">│   │   │   ├── Nth_floor.png</div>
<div class="line">│   │   │   └── Nth_floor.yaml</div>
<div class="line">│   │   ├── sectors.yaml</div>
<div class="line">│   │   └── station.yaml</div>
<div class="line">│   ├── sound/</div>
<div class="line">│   │   ├── ...</div>
<div class="line">│   │   └── ...</div>
<div class="line">│   └── aimbot.rviz</div>
<div class="line">└── [사이트 이름2]/</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md17"></a>
3.3.1 site_info</h3>
<p>사이트에 관련된 환경변수를 저장한다. 크게 엘리베이터, 서버, GUI관련 환경변수로 나누어진다.</p><ul>
<li><code>hennna</code> 예시 <div class="fragment"><div class="line">####################</div>
<div class="line"># SITE PARAMETERS</div>
<div class="line">####################</div>
<div class="line"> </div>
<div class="line">##### EV information</div>
<div class="line">## EV_IP : 엘리베이터 CRT 감시반 IP</div>
<div class="line">export EV_IP=&#39;211.104.61.97&#39;</div>
<div class="line"> </div>
<div class="line">##### SERVER information</div>
<div class="line">## REMOTE_APP : Remote agent -&gt; App 사용 모드</div>
<div class="line"># true or false</div>
<div class="line">export REMOTE_APP=false</div>
<div class="line"> </div>
<div class="line">## DB_SITE : DB 연동 사이트</div>
<div class="line"># robotis ...은</div>
<div class="line">export DB_SITE=none</div>
<div class="line"> </div>
<div class="line">## REMOTE_SERVER : Remote agent -&gt; Server 사용 모드</div>
<div class="line"># true or false</div>
<div class="line">export REMOTE_SERVER=true</div>
<div class="line"> </div>
<div class="line">## REMOTE_SERVER_IP : Remote agent -&gt; Server 사용시 server IP</div>
<div class="line">export REMOTE_SERVER_IP=&#39;211.104.61.97&#39;</div>
<div class="line">export REMOTE_SERVER_PORT=&#39;1883&#39;</div>
<div class="line"> </div>
<div class="line">##### GUI information</div>
<div class="line">## EV_DEDICATTED_MODE : EV 전용모드</div>
<div class="line"># true or false</div>
<div class="line">export EV_DEDICATED_MODE=true</div>
<div class="line"> </div>
<div class="line">## HOTEL_MODE : 호텔모드</div>
<div class="line"># true or false</div>
<div class="line">export HOTEL_MODE=true</div>
<div class="line"> </div>
<div class="line">## INPUT_DEST_PAGE : 도착지 입력 페이지 설정</div>
<div class="line"># InputRoom or SelectTarget</div>
<div class="line"># InputRoom : 숫자패드로 방 번호 입력</div>
<div class="line"># SelectTarget : 도착지 리스트에서 선택</div>
<div class="line">export INPUT_DEST_PAGE=InputRoom</div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p><code>SERVER information</code>에서 <code>REMOTE_APP</code>가 <code>true</code>라면 반드시 <code>DB_SITE</code>가 설정되어 있어야 한다. </p>
</blockquote>
<p>또한 <code>REMOTE_SERVER</code>가 <code>true</code>라면 반드시 <code>REMOTE_SERVER_IP</code>와 <code>REMOTE_SERVER_PORT</code>가 설정되어 있어야 한다.</p>
<blockquote class="doxtable">
<p><code>GUI information</code>에서 <code>EV_DEDICATED_MODE</code>는 엘리베이터 무선 컨드롤러를 전용모드를 설정할 수 있는 특수한 경우에만 <code>true</code>로 설정한다. </p>
</blockquote>
<p>또한 <code>HOTEL_MODE</code> 를 <code>true</code>로 설정하면, GUI와 AUI에서 호텔에 알맞는 멘트로 변경된다. <code>INPUT_DEST_PAGE</code>가 <code>true</code>라면 반드시 <code>REMOTE_SERVER_IP</code>와 <code>REMOTE_SERVER_PORT</code>가 설정되어 있어야 한다.</p>
<h3><a class="anchor" id="autotoc_md18"></a>
3.3.2 map</h3>
<p>사이트의 맵과 각종 poi의 위치정보를 포함한다. 위치정보는 <code>destination</code>, <code>ev</code>, <code>gate</code>, <code>station</code>으로 구분되며, 그외에 <code>sectors</code>를 설정해야 한다. </p><div class="fragment"><div class="line">map/</div>
<div class="line">├── destinations/</div>
<div class="line">│   ├── [목적지1].yaml</div>
<div class="line">│   └── [목적지2].yaml</div>
<div class="line">├── ev/</div>
<div class="line">│   ├── ev1.yaml</div>
<div class="line">│   ├── ev2.yaml</div>
<div class="line">│   └── ...</div>
<div class="line">├── gate/</div>
<div class="line">│   └── security_door.yaml</div>
<div class="line">├── maps/</div>
<div class="line">│   ├── map_info.yaml</div>
<div class="line">│   ├── 1st_floor.png</div>
<div class="line">│   ├── 1st_floor.yaml</div>
<div class="line">│   ├── ...</div>
<div class="line">│   ├── Nth_floor.png</div>
<div class="line">│   └── Nth_floor.yaml</div>
<div class="line">├── sectors.yaml</div>
<div class="line">└── station.yaml</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md19"></a>
3.3.3 map/maps/</h3>
<p>각 층 맵에 해당하는 맵 파일의 이미지 파일(<code>.png</code>)과, 각각파일의 설정파일(<code>.yaml</code>) 및 맵 간의 연결정보를 나타내는 <code>map_info.yaml</code> 로 구성되어있다.</p><ul>
<li><code>map_info.yaml</code> <div class="fragment"><div class="line">map_1 :</div>
<div class="line">  text : 1층</div>
<div class="line">  parent_id : map</div>
<div class="line">  frame_id : map_1</div>
<div class="line">  topic_name : /map_1</div>
<div class="line">  map_file : [aimbot_params, site, robotis, map, maps, mod_office_1st.yaml]  #[package name, sub folder, ... , file name]</div>
<div class="line">  tf_origin : [0.0, 0.0, 0.0]</div>
<div class="line">  init_pose : [1.0, -3.0, 90.0]  # x(m), y(m), theta(degree)</div>
<div class="line"> </div>
<div class="line">map_2 :</div>
<div class="line">  text : 2층</div>
<div class="line">  parent_id : map</div>
<div class="line">  frame_id : map_2</div>
<div class="line">  topic_name : /map_2</div>
<div class="line">  map_file : [aimbot_params, site, robotis, map, maps, mod_office_2nd.yaml]  #[package name, sub folder, ... , file name]</div>
<div class="line">  tf_origin : [0.0, 50.0, 0.0]</div>
<div class="line">  init_pose : [1.0, -3.0, 90.0]  # x(m), y(m), theta(degree)</div>
<div class="line">...</div>
</div><!-- fragment --></li>
<li><code>[맵이름].yaml</code> <div class="fragment"><div class="line">image: mod_office_1st.png     # 해당 이미지 파일명</div>
<div class="line">mode: trinary                 #</div>
<div class="line">resolution: 0.05              # 이미지의 한픽셀당 크기 (단위는 m)</div>
<div class="line">origin: [-16.0, -4.0, 0.0]    # 이미지의 왼쪽 위에서부터 맵의 원점의 위치 (단위는 m)</div>
<div class="line">negate: 0</div>
<div class="line">occupied_thresh: 0.65</div>
<div class="line">free_thresh: 0.1  #0.25</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md20"></a>
3.3.4 map/sectors.yaml</h3>
<p>각 맵의 구역 정보</p><ol type="1">
<li>sector를 체크할때 번호가 낮은 순서(상단)부터 해당 조건에 만족되는지 체크하여 내려가게됩니다. ( if, else if ,,, 와 같다고 생각하시면 됩니다.)</li>
<li>lines를 작성할때 반드시 박스형태로 a,b,c,f 모두 작성할 필요는 없고, lines 갯수는 몇개든 상관없습니다. (lines내에서 and 로 묶여있다고 보면 되겠습니다.)</li>
<li>floor와 lines의 수식을 모두 만족하면 name이 sector로 설정됩니다. 하나의 층에 하나의 sector가 한번만 작성될 필요가 없습니다. <div class="fragment"><div class="line"># 현재 파일은 테스트를 위한 예시</div>
<div class="line">base:</div>
<div class="line">    name: base</div>
<div class="line">    floor: 1</div>
<div class="line">    lines:</div>
<div class="line">    a: [1.0, 0.0, 2.5]      # x + 2.5 &gt;= 0 : x &gt;= -2.5</div>
<div class="line">    b: [-1.0, 0.0, -1.0]    # -x - 1.0 &gt;= 0 : -1.0 &gt;= x</div>
<div class="line">    c: [0.0, -1.0, 1.5]     # -y + 1.5 &gt;= 0 : 1.5 &gt;= y</div>
<div class="line">    d: [0.0, 1.0, -0.5]     # y - 0.5 &gt;= 0 : y &gt;= 0.5</div>
<div class="line">inside_1:</div>
<div class="line">    name: inside</div>
<div class="line">    floor: [1,2]</div>
<div class="line">    lines:</div>
<div class="line">    a: [0.0, 1.0, -1.65]    # y - 1.65 &gt;= 0 : y &gt;= 1.65</div>
<div class="line"> </div>
<div class="line">inside_2:</div>
<div class="line">    name: inside</div>
<div class="line">    floor: 3</div>
<div class="line">    lines:</div>
<div class="line">    a: [0.0, 1.0, -1.60]    # y - 1.6 &gt;= 0 : y &gt;= 1.6</div>
<div class="line"> </div>
<div class="line">default_sector: outside</div>
</div><!-- fragment --></li>
</ol>
<blockquote class="doxtable">
<p><code>floor</code>를 배열 형식으로 작성하면 그 모든 층에 대해서 같은 영역으로 sector를 지정할 수 있다. </p>
</blockquote>
<h3><a class="anchor" id="autotoc_md21"></a>
3.3.5 map/station.yaml</h3>
<p>도킹스테이션의 위치와 도킹시 얼만큼의 거리에서 도킹을 시작할지를 지정 할 수 있다. 도킹스테이션은 복수개 설정할 수 있으며, <a href="#31-robot">3.1. robot</a>에서 설정한 <code>ROBOTI_NUM</code>의 숫자를 토대로 어떤 위치의 도킹스테이션을 Base로 사용할 지 지정된다.</p><ul>
<li>작성정보<ul>
<li>uuid : 임의의 중복되지 않는 코드</li>
<li>num: <code>ROBOT_NUM</code>과 매칭되는 도킹스테이션 번호</li>
<li>name: 사용자가 구분하기 쉽게 이름을 붙임</li>
<li>floor: 해당 스테이션이 배치된 층</li>
<li>sector: 해당 스테이션이 배치된 구역</li>
<li>docking_distance_m : 도킹을 시작하기 전에 도달하는 위치(스테이션과 떨어진 거리)</li>
<li>pose: 해당 스테이션이 배치된 물리적인 위치 좌표</li>
<li>x: 지도의 기준점으로부터 x좌표 거리(meter)</li>
<li>y: 지도의 기준점으로부터 y좌표 거리(meter)</li>
<li>theta: +X 축 방향을 0도 기준으로 반시계방향 각도값(degree) <div class="fragment"><div class="line">06de07e9-7c70-e37d-4354-2e8ca413581a:</div>
<div class="line">  num: 1</div>
<div class="line">  name: 1층_왼쪽</div>
<div class="line">  floor: 1</div>
<div class="line">  sector: outside</div>
<div class="line">  docking_distance_m: 0.5</div>
<div class="line">  pose:</div>
<div class="line">    x: 1.6</div>
<div class="line">    y: 0.1</div>
<div class="line">    theta: 0</div>
<div class="line">06de07e9-7c70-e37d-4354-2e8ca41d181a:</div>
<div class="line">  num: 2</div>
<div class="line">  name: 1층_오른쪽</div>
<div class="line">  floor: 1</div>
<div class="line">  sector: outside</div>
<div class="line">  docking_distance_m: 0.5</div>
<div class="line">  pose:</div>
<div class="line">    x: -1.6</div>
<div class="line">    y: 0.1</div>
<div class="line">    theta: 180</div>
<div class="line">06de07e9-7c70-e37d-4354-2e8ca41d121a:</div>
<div class="line">  num: 3</div>
<div class="line">  name: 기술솔루션팀_1</div>
<div class="line">  floor: 5</div>
<div class="line">  sector: inside</div>
<div class="line">  docking_distance_m: 0.5</div>
<div class="line">  pose:</div>
<div class="line">    x: -1.6</div>
<div class="line">    y: 23.05</div>
<div class="line">    theta: -180</div>
</div><!-- fragment --></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md22"></a>
3.3.6 map/destinations/</h3>
<p>로봇의 목적지 리스트. 이 폴더 내부에 만든 모든 <code>.yaml</code>형식의 파일은 모두 같은 방식으로 읽어 목적지 리스트로 등록한다. 따라서 목적지의 형식, 타입 등 사용자가 구분하기 쉬운 기준으로 파일을 나누어 관리해도 상관없다. 1)방 이름으로 구성된 목적지 리스트, 2)호출때만 사용할 목적지 리스트, 3) 노크를 시도할 목적지 리스트, 4) 초인종을 누를 목적지 리스트 등 원하는 분류에 따라 작성한다.</p>
<ul>
<li>**<code>기본적인 작성방법</code>** : 아래의 정보를 입력하여, 가장 일반적인 방법으로 목적지를 설정할 수 있다.<ul>
<li>uuid : 임의의 중복되지 않는 코드</li>
<li>key : 해당 목적지를 호출 할 때 사용할 이름, <b>다른 목적지와 중복되게 설정되면 안된다</b>.</li>
<li>name : 화면(gui, app)에 표시될 목적지 이름</li>
<li>floor : 해당 목적지가 위치하는 층 정보 (복수개 설정 할 수 없다. 복수개 설정하는 방법은 아래를 참고)</li>
<li>sector : 해당 목적지가 위치하는 구역</li>
<li>pose: 해당 스테이션이 배치된 물리적인 위치 좌표</li>
<li>type : 목적지의 타입 (<code>DESTINATION</code>, <code>CALL</code>, <code>NONE</code> 을 사용할 수 있고, <code>DESTINATION</code>만 GUI에 표시된다.)</li>
<li>action : 목적지에 도착해서 알림을 할 방법을 지정 (<code>KNOCK</code>, <code>BELL</code>, <code>NONE</code> 을 사용할 수 있다. <code>BELL</code>의 경우 버튼의 위치를 지정해야 한다.) <div class="fragment"><div class="line">84f3c5ed-8b1a-2610-3115-e5c28cb269f2:</div>
<div class="line">  key: 610</div>
<div class="line">  name: 610호(버거)</div>
<div class="line">  floor: 6</div>
<div class="line">  sector: inside</div>
<div class="line">  pose:</div>
<div class="line">    x: 0.73</div>
<div class="line">    y: 29.6</div>
<div class="line">    theta: 0</div>
<div class="line">  type: DESTINATION</div>
<div class="line">  action: KNOCK</div>
<div class="line">559993e7-fe6c-e5ed-f9ed-6d0126ad7546:</div>
<div class="line">  key: ai</div>
<div class="line">  name: 인공지능팀</div>
<div class="line">  floor: 5</div>
<div class="line">  sector: inside</div>
<div class="line">  pose:</div>
<div class="line">    x: 0.0</div>
<div class="line">    y: 28.38</div>
<div class="line">    theta: -180</div>
<div class="line">  type: DESTINATION</div>
<div class="line">  action: NONE</div>
<div class="line">5ec7e161-d6bc-48bd-bc75-53c95a61c3a1:</div>
<div class="line">  room_num: 35</div>
<div class="line">  floor: [6,7,8,9,14]</div>
<div class="line">  sector: inside</div>
<div class="line">  door:</div>
<div class="line">    x: 77.52</div>
<div class="line">    y: 20.8</div>
<div class="line">    theta: 90</div>
<div class="line">  pose:</div>
<div class="line">    x: 77.90000000000001</div>
<div class="line">    y: 19.91</div>
<div class="line">    theta: 90</div>
<div class="line">  type: DESTINATION</div>
<div class="line">  action: BELL</div>
<div class="line">  buttons:</div>
<div class="line">    bell:</div>
<div class="line">      name: bell</div>
<div class="line">      x: 78.15</div>
<div class="line">      y: 20.57</div>
<div class="line">      z: 1.3</div>
<div class="line">      yaw: 90</div>
<div class="line">5ec7e161-d6bc-41bd-bc75-53c95a61c3a1:</div>
<div class="line">  room_num: 35</div>
<div class="line">  floor: [10,11,12]</div>
<div class="line">  sector: inside</div>
<div class="line">  door:</div>
<div class="line">    x: 80.12</div>
<div class="line">    y: 20.81</div>
<div class="line">    theta: 90</div>
<div class="line">  pose_form_door:</div>
<div class="line">    x: -0.5</div>
<div class="line">    y: 0.0</div>
<div class="line">    theta: 20</div>
<div class="line">  type: DESTINATION</div>
<div class="line">  action: BELL</div>
<div class="line">  buttons:</div>
<div class="line">    bell:</div>
<div class="line">      name: bell</div>
<div class="line">      x: 79.49</div>
<div class="line">      y: 20.57</div>
<div class="line">      z: 1.3</div>
<div class="line">      yaw: 90</div>
</div><!-- fragment --></li>
</ul>
</li>
</ul>
<blockquote class="doxtable">
<p><code>action</code>이 <code>BELL</code>로 설정되어있을 경우, <code>buttons</code>와 <code>door</code> 두 가지의 추가 설정이 필요하다. </p>
</blockquote>
<p><code>buttons</code>의 경우는 초인종을 누를때 버튼의 대략적인 위치를 알아야 하기때문에 필요하며, <code>door</code>의 경우는 초인종을 누를때는 문이 열렸는지 안열렸는지 판단할때, 문의 map에서의 절대좌표가 필요하므로 입력이 필요하다.</p>
<blockquote class="doxtable">
<p><code>buttons</code>는 추후에 새로운 형태가 추가될 가능성도 있다. 기본적으로는 매니퓰레이터를 사용하는데 필요한 좌표를 지정한다. </p>
</blockquote>
<blockquote class="doxtable">
<p><code>pose</code>를 입력할 때 위치값을 맵좌표계 상에서 위치를 바로입력할 수 있고, </p>
</blockquote>
<p><code>door</code>를 추가해 둔 경우에는 <code>pose_from_door</code>라는 이름으로 문에 대한 상대적 위치 값만을 입력할 수도 있다. 이렇게 하면 맵(<code>png</code>파일)상에서 찾기쉬운 문위치를 지정하고, <code>pose_from_door</code>는 간단한 입력값만을 넣어서 지정할 수 있다.</p>
<ul>
<li>**<code>floor + room_num</code>** : 반복되는 방 이름이 지속될 때 작성 방법으로 floor와 room_num을 기준으로 key와 name을 생성한다.</li>
</ul>
<div class="fragment"><div class="line">5ec7e161-d6bc-48bd-bc75-53c95a61c3a1:</div>
<div class="line">  room_num: 35</div>
<div class="line">  floor: [6,7,8]</div>
<div class="line">  ...</div>
</div><!-- fragment --><div class="fragment"><div class="line">5ec7e161-d6bc-48bd-bc75-53c95a61c3a1(6):</div>
<div class="line">  key: 635</div>
<div class="line">  name: 635호</div>
<div class="line">  floor: 6</div>
<div class="line">  ...</div>
<div class="line">5ec7e161-d6bc-48bd-bc75-53c95a61c3a1(7):</div>
<div class="line">  key: 735</div>
<div class="line">  name: 735호</div>
<div class="line">  floor: 7</div>
<div class="line">  ...</div>
<div class="line">5ec7e161-d6bc-48bd-bc75-53c95a61c3a1(8):</div>
<div class="line">  key: 835</div>
<div class="line">  name: 835호</div>
<div class="line">  floor: 8</div>
<div class="line">  ...</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>위 코드블록처럼 작성하면 아래의 형식으로 목적지가 등록된다. </p>
</blockquote>
<h3><a class="anchor" id="autotoc_md23"></a>
3.3.7 map/ev/</h3>
<p>엘리베이터 탑승에 이용되는 경유점리스트를 가지고 있는 폴더로 엘리베이터 하나마다 하나의 파일을 작성해야한다. </p><div class="fragment"><div class="line">name: ev1               # 엘리베이터의 이름 : `ev`+{엘리베이터 번호} 로 만들어지며, 엘리베이터 번호는 elevator_controller의 엘리베이터 번호와 일치해야한다.</div>
<div class="line">sector: outside         # 엘리베이터가 위치하는 구역이름</div>
<div class="line">waypoints:</div>
<div class="line">  hall_call:</div>
<div class="line">    key: hall_call                  # 엘리베이터를 외부에서 버튼을 눌러 호출할때 위치 (통신으로 호출할 경우 경유하지 않는다.)</div>
<div class="line">    floor: [1,2,3,4,5,6,7]          # 이 경유지가 존재하는 층 리스트. 층별로 pose값이 조금씩 다르다면 분리해서 작성할 수 있다.</div>
<div class="line">    x: 0.42</div>
<div class="line">    y: -0.79</div>
<div class="line">    theta: -90</div>
<div class="line">  on_wait:</div>
<div class="line">    key: on_wait                    # 엘리베이터를 외부에서 호출한 이후에 엘리베이터가 도착할때까지 기다리는 위치</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 1.1</div>
<div class="line">    y: -0.70</div>
<div class="line">    theta: -90</div>
<div class="line">  car_call:</div>
<div class="line">    key: car_call                   # 엘리베이터를 내부에서 버튼을 눌러 호출하는 위치 (통신으로 호출할 경우 경유하지 않는다.)</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 1.0</div>
<div class="line">    y: -2.8</div>
<div class="line">    theta: 180</div>
<div class="line">  off_wait:</div>
<div class="line">    key: off_wait                   # 엘리베이터가 목적층에 도착할때 까지 대기하는 위치</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 1.0</div>
<div class="line">    y: -2.8</div>
<div class="line">    theta: 90</div>
<div class="line">  ev_exit:</div>
<div class="line">    key: ev_exit                    # 엘리베이터가 목적층에 도착하여 하차하는 위치</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 1.1</div>
<div class="line">    y: -0.5</div>
<div class="line">    theta: 90</div>
<div class="line">buttons:                            # 엘리베이터에서 사용되는 버튼들의 위치를 지정한다.</div>
<div class="line">  in_1:                             # key 값으로 알기쉬운 값을 설정하기만 하면된다.</div>
<div class="line">    name: 1                         # 버튼의 이름</div>
<div class="line">    floor: [1,2,3,4,5,6,7]          # 버튼이 있는 층 (동일한 이름의 버튼이라도 외부버튼의 경우 층에 위치가 다를수 있으므로 분리가능하다.)</div>
<div class="line">    x: 0.306</div>
<div class="line">    y: -2.585</div>
<div class="line">    z: 0.943</div>
<div class="line">    yaw: 180</div>
<div class="line">  in_2:</div>
<div class="line">    name: 2</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 0.3</div>
<div class="line">    y: -2.535</div>
<div class="line">    z: 0.943</div>
<div class="line">    yaw: 180</div>
<div class="line">  in_3:</div>
<div class="line">    name: 3</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 0.3</div>
<div class="line">    y: -2.485</div>
<div class="line">    z: 0.943</div>
<div class="line">    yaw: 180</div>
<div class="line">  in_4:</div>
<div class="line">    name: 4</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 0.3</div>
<div class="line">    y: -2.635</div>
<div class="line">    z: 0.985</div>
<div class="line">    yaw: 180</div>
<div class="line">  in_5:</div>
<div class="line">    name: 5</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 0.3</div>
<div class="line">    y: -2.585</div>
<div class="line">    z: 0.985</div>
<div class="line">    yaw: 180</div>
<div class="line">  in_6:</div>
<div class="line">    name: 6</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 0.3</div>
<div class="line">    y: -2.535</div>
<div class="line">    z: 0.985</div>
<div class="line">    yaw: 180</div>
<div class="line">  in_7:</div>
<div class="line">    name: 7</div>
<div class="line">    floor: [1,2,3,4,5,6,7]</div>
<div class="line">    x: 0.3</div>
<div class="line">    y: -2.485</div>
<div class="line">    z: 0.985</div>
<div class="line">    yaw: 180</div>
<div class="line">  down:</div>
<div class="line">    name: down</div>
<div class="line">    floor: [2,3,4,5,6]         # 버튼이 있는 층</div>
<div class="line">    x: 0.361</div>
<div class="line">    y: -1.336</div>
<div class="line">    z: 0.925</div>
<div class="line">    yaw: -90.0</div>
<div class="line">  down_1:</div>
<div class="line">    name: down</div>
<div class="line">    floor: [1]                 # 버튼이 있는 층</div>
<div class="line">    x: 0.361</div>
<div class="line">    y: -1.336</div>
<div class="line">    z: 0.925</div>
<div class="line">    yaw: -90.0</div>
<div class="line">  down_7:</div>
<div class="line">    name: down</div>
<div class="line">    floor: [7]</div>
<div class="line">    x: 0.361</div>
<div class="line">    y: -1.336</div>
<div class="line">    z: 0.925</div>
<div class="line">    yaw: -90.0</div>
<div class="line">  up:</div>
<div class="line">    name: up</div>
<div class="line">    floor: [2,3,4,5,6]</div>
<div class="line">    x: 0.375</div>
<div class="line">    y: -1.344</div>
<div class="line">    z: 1.002</div>
<div class="line">    yaw: -90.0</div>
<div class="line">  up_1:</div>
<div class="line">    name: up</div>
<div class="line">    floor: [1]</div>
<div class="line">    x: 0.375</div>
<div class="line">    y: -1.344</div>
<div class="line">    z: 1.002</div>
<div class="line">    yaw: -90.0</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>해당 엘리베이터가 등록되어있다면, <code>sectors.yaml</code> 파일에 엘리베이터 <code>name</code>으로 등록된 sector가 있어야한다. </p>
</blockquote>
<h3><a class="anchor" id="autotoc_md24"></a>
3.3.8 map/gate/</h3>
<p>만약 보안문이 존재하지 않는 사이트라면 해당 폴더를 만들지 않아도 된다. </p><div class="fragment"><div class="line">name: security_door         # 보안문의 이름을 설정한다. 현재로는 반드시 security_door로 설정해야한다.</div>
<div class="line">floor: [2,3,4,5,6,7]        # 해당 보안문이 설치되어 있는 층을 입력 (설치되어 있는곳이 층마다 조금씩 다를경우 다른 파일에 따로 생성한다.)</div>
<div class="line">pose:                       # 보안문의 맵상의 좌표를 입력</div>
<div class="line">  x: -0.07</div>
<div class="line">  y: 1.68</div>
<div class="line">  theta: 0</div>
<div class="line">first_sector:               # 보안문은 기본적으로 Sector를 구분하는데 사용된다. 구분되는 2개의 sector중 하나에 대해 입력한다.</div>
<div class="line">  sector_name: inside       # 섹터의 이름을 입력</div>
<div class="line">  pose:                     # 이 섹터를 통과하는 동작을 수행할때 멈출 위치를 지정한다.</div>
<div class="line">    x: -1.0</div>
<div class="line">    y: 2.24</div>
<div class="line">    theta: -90</div>
<div class="line">  action: PUSH              # WITE , PUSH, COMM. ... (현재 사용하고 있지 않다. 아무값이나 입력하자)</div>
<div class="line">  buttons:                  # 보안문을 통과할때 매니퓰레이터로 버튼, 태깅을 해야할 경우 버튼의 위치를 입력해주어야한다/</div>
<div class="line">    door:</div>
<div class="line">      name: door</div>
<div class="line">      floor: [2,3,4,5,6,7]  # 층마다 버튼의 위치가 조금씩다를 경우 분리하여 입력한다.</div>
<div class="line">      x: -1.026</div>
<div class="line">      y: 1.716</div>
<div class="line">      z: 1.192</div>
<div class="line">      yaw: -90</div>
<div class="line">second_sector:              # 해당 보안문에 의해 구분되는 2개의 sector중 나머지 하나에 대해 입력한다.</div>
<div class="line">  sector_name: outside      # 두번째 섹터의 이름을 입력</div>
<div class="line">  pose:                     # 이 섹터를 통과하는 동작을 수행할때 멈출 위치를 지정한다.</div>
<div class="line">    x: 1.55</div>
<div class="line">    y: 1</div>
<div class="line">    theta: 30</div>
<div class="line">  action: PUSH              # WITE , PUSH, COMM. ...</div>
<div class="line">  buttons:</div>
<div class="line">    tag_4:</div>
<div class="line">      name: tag</div>
<div class="line">      floor: [4]            # 층마다 버튼의 위치가 조금씩다를 경우 분리하여 입력한다.</div>
<div class="line">      x: 2.135</div>
<div class="line">      y: 1.025</div>
<div class="line">      z: 1.205</div>
<div class="line">      yaw: 0</div>
<div class="line">    tag_5:</div>
<div class="line">      name: tag</div>
<div class="line">      floor: [5]</div>
<div class="line">      x: 2.135</div>
<div class="line">      y: 1.225</div>
<div class="line">      z: 1.205</div>
<div class="line">      yaw: 0</div>
<div class="line">    tag_6:</div>
<div class="line">      name: tag</div>
<div class="line">      floor: [6]</div>
<div class="line">      x: 2.135</div>
<div class="line">      y: 1.025</div>
<div class="line">      z: 1.205</div>
<div class="line">      yaw: 0</div>
<div class="line">    tag_7:</div>
<div class="line">      name: tag</div>
<div class="line">      floor: [7]</div>
<div class="line">      x: 2.135</div>
<div class="line">      y: 1.025</div>
<div class="line">      z: 1.205</div>
<div class="line">      yaw: 0</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25"></a>
3.3.9 gui</h3>
<ul>
<li><b>images/</b> : 해당사이트에서 GUI에 사용되는 이미지를 저장한다. 여기에 따로 이미지를 저장하지 않았을 경우 <code>aimbot_params/site/_default/gui/images</code> 폴더 내부의 이미지파일을 사용한다.</li>
<li><b>localizations/</b> : <code>tests.yaml</code> 파일에서 로봇대기화면에 표시될 로봇의 이름을 언어별로 설정한다. <div class="fragment"><div class="line">robot_name:</div>
<div class="line">  ko: &lt;p&gt;&lt;span style=&quot; font-size:75pt;&quot;&gt;실내 배송 로봇&lt;br&gt;「개미」&lt;/span&gt;&lt;/p&gt;</div>
<div class="line">  en: &lt;p&gt;&lt;span style=&quot; font-size:63pt;&quot;&gt;Indoor delivery robot&lt;/p&gt;&lt;p&gt;&lt;span style=&quot; font-size:83pt;&quot;&gt;「GAEMI」&lt;/span&gt;&lt;/p&gt;</div>
<div class="line">  jp: &lt;p&gt;&lt;span style=&quot; font-size:70pt;&quot;&gt;屋内配送ロボット&lt;br&gt;「GAEMI」&lt;/span&gt;&lt;/p&gt;</div>
<div class="line">  cn: &lt;p&gt;&lt;span style=&quot; font-size:70pt;&quot;&gt;室内配送机器人&lt;br&gt;「GAEMI」&lt;/span&gt;&lt;/p&gt;</div>
</div><!-- fragment --></li>
<li><b>docent/</b> : 해당사이트에서 도슨트서비스를 사용하는 경우에, 여기에 도슨트 서비스에서 사용하는 이미지(<code>.png</code>)와 음성(<code>.mp3</code>)을 저장한다. 도슨트 서비스 설정파일(<code>docent_main_config.yaml</code>)도 이 폴더 내에 존재해야 한다.</li>
</ul>
<h3><a class="anchor" id="autotoc_md26"></a>
3.3.10 sound</h3>
<p>해당사이트에서 특정 상황에 재생되는 <code>.mp3</code> 파일을 저장한다. 여기에 따로 사운드를 저장하지 않았을 경우 <code>aimbot_params/site/_default/sound</code> 폴더 내부의 <code>mp3</code>파일을 사용한다.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
4. service</h2>
<p>서비스를 수행하는데 있어 그 행동에 사용되는 파라미터. 이 파라미터는 하드웨어와 사이트 모두에 의존하는 경우가 많다. 디렉토리의 구조는 아래와 같다. </p><div class="fragment"><div class="line">service/</div>
<div class="line">├──[사이트 이름1]/</div>
<div class="line">│   ├── [로봇아이디1]/</div>
<div class="line">│   │       ├── service_option.yaml</div>
<div class="line">│   │       ├── door_detection.yaml</div>
<div class="line">│   │       ├── nav2.yaml</div>
<div class="line">│   │       ├── push_params.yaml</div>
<div class="line">│   │       └── knock_params.yaml</div>
<div class="line">│   └── [로봇아이디2]/</div>
<div class="line">│           ├── service_option.yaml</div>
<div class="line">│           ├── door_detection.yaml</div>
<div class="line">│           ├── nav2.yaml</div>
<div class="line">│           ├── push_params.yaml</div>
<div class="line">│           └── knock_params.yaml</div>
<div class="line">└── [사이트 이름2]/</div>
<div class="line">    └── [로봇아이디3]/</div>
<div class="line">            ├── service_option.yaml</div>
<div class="line">            ├── door_detection.yaml</div>
<div class="line">            ├── nav2.yaml</div>
<div class="line">            ├── push_params.yaml</div>
<div class="line">            └── knock_params.yaml</div>
</div><!-- fragment --><ul>
<li><code>door_detection.yaml</code> : <code>door_detection</code>노드에서 사용하는 파라미터.</li>
<li><code>nav2.yaml</code> : <code>navigation</code>에서 사용하는 파라미터.</li>
</ul>
<h3><a class="anchor" id="autotoc_md28"></a>
4.1. service_option</h3>
<p><code>service_option.yaml</code>에서 해당 사이트에서 어떤 행동을 수행하는지를 설정하고, 그때의 Default parameters를 설정한다. </p><blockquote class="doxtable">
<p>여기서 설정하지 않은 파라미터의 경우 <code>aimbot_params/service/_default/service_option.yaml</code>의 설정값을 사용한다. </p>
</blockquote>
<ul>
<li><code>service_option.yaml</code>의 default <div class="fragment"><div class="line">move_sector:</div>
<div class="line">  ##### sertor 이동</div>
<div class="line">  ## sector_mode : 섹터 이동 종류</div>
<div class="line">  # tag : 매니퓰레이터를 이용하여 tag 혹은 버튼을 눌러 섹터 이동</div>
<div class="line">  # seoul_cityhall : 서울 시청에만 적용되는 특수한 섹터 이동 (리모컨을 이용하여 센터 중앙문을 열고 섹터 이동)</div>
<div class="line">  # hennna : 헨나호텔에만 적용되는 특수한 섹터 이동</div>
<div class="line">  # none : 섹터 이동이 없는 경우</div>
<div class="line">  sector_mode: none ##### 필수 파라미터</div>
<div class="line">  ##########</div>
<div class="line">  ### Only when use_flag is tag</div>
<div class="line">  ## sector_outside_btn_name : 섹터 바깥쪽 버튼 이름</div>
<div class="line">  sector_outside_btn_name: tag</div>
<div class="line">  ## sector_outside_mani_push_thres : 매니퓰레이터 버튼 누를때 힘의 threshold</div>
<div class="line">  sector_outside_mani_push_thres: 0.012</div>
<div class="line">  ## sector_outside_mani_push_pos_x : 매니퓰레이터가 버튼 누를때 이동하는 x의 거리 양</div>
<div class="line">  sector_outside_mani_push_pos_x: 0.18 # m</div>
<div class="line">  ## sector_outside_mani_goal_from_target : 매니튤레이터가 버튼 누르기 전 최종 이동 위치 (버튼 기준)</div>
<div class="line">  sector_outside_mani_goal_from_target:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: -0.18 # 버튼 기준 x축으로 이동하여 찾기 종료 (sector_outside_mani_push_pos_x * -1)</div>
<div class="line">      y: 0.0   # 버튼 기준 y축으로 이동하여 찾기 종료</div>
<div class="line">      z: 0.0   # 버튼 기준 z축으로 이동하여 찾기 종료</div>
<div class="line">  ## sector_outside_mani_target_offset : 버튼을 누르는 위치에 대한 offset</div>
<div class="line">  sector_outside_mani_target_offset:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: 0.0   # 버튼을 기준으로 x축</div>
<div class="line">      y: 0.0   # 버튼을 기준으로 y축, 버튼을 기준으로 좌측이 +</div>
<div class="line">      z: 0.0  # 버튼을 기준으로 z축, 버튼을 기준으로 상방이 +</div>
<div class="line">  sector_outside_mani_prepare_x: -0.18  # 버튼에서 얼만큼 떨어진 위치에 카메라를 가져다 놓고 트래킹을 시작할지</div>
<div class="line">  sector_outside_mani_btn_size:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: plane_calc_params.voxel_filter.button_height</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.5</div>
<div class="line">    ros_param:</div>
<div class="line">      name: plane_calc_params.voxel_filter.button_width</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 1.0</div>
<div class="line">  ## sector_inside_btn_name : 섹터 안쪽 버튼 이름</div>
<div class="line">  sector_inside_btn_name: door</div>
<div class="line">  sector_inside_mani_push_thres: 0.27</div>
<div class="line">  sector_inside_mani_push_pos_x: 0.25</div>
<div class="line">  sector_inside_mani_goal_from_target:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: -0.25</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  sector_inside_mani_target_offset:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: 0.0</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  sector_inside_mani_prepare_x: -0.25</div>
<div class="line">  sector_inside_mani_btn_size:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: plane_calc_params.voxel_filter.button_height</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.5</div>
<div class="line">    ros_param:</div>
<div class="line">      name: plane_calc_params.voxel_filter.button_width</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 1.0</div>
<div class="line">  ########## end of use_flag:tag</div>
<div class="line">elevator_control:</div>
<div class="line">  ##### 엘리베이터 이동</div>
<div class="line">  ## control_mode : 엘리베이터 제어 모드</div>
<div class="line">  # single : 엘리베이터 개별 제어</div>
<div class="line">  # multi : 엘리베이터 군 제어</div>
<div class="line">  control_mode: single ##### 필수 파라미터</div>
<div class="line">  ## elevator_num : 엘리베이터를 제어하기 위한 엘리베이터 번호</div>
<div class="line">  elevator_num: 1</div>
<div class="line">  ## ev 경로 실패시 재생성 시간 (초)</div>
<div class="line">  nav_recovery_time : 5.0</div>
<div class="line">  ## ev nav param</div>
<div class="line">  nav_param_before_ev:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.max_vel_x</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.4</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.sim_time</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 1.5</div>
<div class="line">  nav_param_after_ev:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.max_vel_x</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.55</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.sim_time</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 1.5</div>
<div class="line">  ## manipulation_outside_btn : 엘리베이터 외부 버튼의 매니퓰레이터로 조작 여부</div>
<div class="line">  # true or false</div>
<div class="line">  manipulation_outside_btn: false ##### 필수 파라미터</div>
<div class="line">  ##########</div>
<div class="line">  # Only when manipulation_outside_btn is true</div>
<div class="line">  ev_outside_mani_push_thres : 0.02</div>
<div class="line">  ev_outside_mani_push_pos_x: 0.18</div>
<div class="line">  ev_outside_mani_goal_from_target:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: -0.18</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  ev_outside_mani_target_offset:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: 0.0</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  ev_outside_mani_prepare_x: -0.18</div>
<div class="line">  ev_outside_mani_btn_size:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: plane_calc_params.voxel_filter.button_height</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.05</div>
<div class="line">    ros_param:</div>
<div class="line">      name: plane_calc_params.voxel_filter.button_width</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.05</div>
<div class="line">  ########## end of manipulation_outside_btn:true</div>
<div class="line">  manipulation_inside_btn: false ##### 필수 파라미터</div>
<div class="line">  ##########</div>
<div class="line">  # Only when manipulation_inside_btn is true</div>
<div class="line">  ev_inside_mani_push_thres : 0.02</div>
<div class="line">  ev_inside_mani_push_pos_x: 0.18 # m</div>
<div class="line">  ev_inside_mani_goal_from_target:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: -0.18</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  ev_inside_mani_target_offset:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: 0.0</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  ev_inside_mani_prepare_x: -0.18</div>
<div class="line">  ev_inside_mani_btn_size:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: plane_calc_params.voxel_filter.button_height</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.05</div>
<div class="line">    ros_param:</div>
<div class="line">      name: plane_calc_params.voxel_filter.button_width</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.05</div>
<div class="line">  ########## end of manipulation_inside_btn:true</div>
<div class="line">alarm_to_customer:</div>
<div class="line">  ##### 고객에게 배송을 알리는 방법</div>
<div class="line">  ## alram_mode : 알림 방법 선택</div>
<div class="line">  # knock : 노크로 알림</div>
<div class="line">  # bell : 초인종 조작으로 알림</div>
<div class="line">  alarm_mode : knock ##### 필수 파라미터</div>
<div class="line">  ##########</div>
<div class="line">  # Only when alarm_mode is knock</div>
<div class="line">  ## knock_count : 노크 횟수</div>
<div class="line">  knock_count: 2</div>
<div class="line">  ## knock_position_rate : 인식된 문의 위치를 기준으로 노크 모션이 진행 (default 0.03m 뒤에서 노크 진행)</div>
<div class="line">  ## 이를 기준으로 몇% 떨어진 거리에서 노크를 시작할 지에 대한 파라미터 (값이 커지면 커질수록 문에서 멀리서 시작함)</div>
<div class="line">  knock_position_rate: 0.8</div>
<div class="line">  ## knock_direction : 노크 동작중 문을 두드리는 동작을 할때 매니퓰레이터의 knock tip을 움직이는 거리</div>
<div class="line">  knock_direction:</div>
<div class="line">    geometry_pose2d:</div>
<div class="line">      x : 0.03</div>
<div class="line">      y : -0.01</div>
<div class="line">      theta : 10.0</div>
<div class="line">  ## 노크 재시도 총 횟수 : 노크를 총 몇번 시도할것인가</div>
<div class="line">  knock_repeat_count: 7</div>
<div class="line">  ## 노크 시도 후 대기 시간 (초)</div>
<div class="line">  wait_time_after_knock : 30</div>
<div class="line">  ########## end of alarm_mode:knock  ##########</div>
<div class="line">  # Only when alarm_mode is bell</div>
<div class="line">  bell_mani_push_thres : 0.320</div>
<div class="line">  bell_mani_push_pos_x: 0.20 # m</div>
<div class="line">  bell_mani_goal_from_target:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: -0.23</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  bell_mani_target_offset:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: 0.0</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  bell_mani_prepare_x: -0.23</div>
<div class="line">  ########## end of alarm_mode:bell</div>
<div class="line">navigation:</div>
<div class="line">  ##### 주행 관련 파라미터</div>
<div class="line">  # MoveGoal 초기 세팅</div>
<div class="line">  # navigation 파라미터</div>
<div class="line">  init_nav_controller_params:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.max_vel_x</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.55</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.sim_time</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 1.5</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.xy_goal_tolerance</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.075</div>
<div class="line">    ros_param:</div>
<div class="line">      name: goal_checker.xy_goal_tolerance</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.15</div>
<div class="line">    ros_param:</div>
<div class="line">      name: goal_checker.yaw_goal_tolerance</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 3.0</div>
<div class="line">  init_nav_planner_params:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: GridBased.tolerance</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.15</div>
<div class="line">  # navigation blackboard 아이템</div>
<div class="line">  preturn_angle_min : 30.0</div>
<div class="line">  default_nav_recovery_time : 5.0</div>
<div class="line">  xy_tol : 0.50</div>
</div><!-- fragment --></li>
</ul>
<blockquote class="doxtable">
<p>여기에서는 특정사이트에서 하지않는 동작에 대한 파라미터도 모두 작성되어있다. 실제 사이트 안의 <code>service_option.yaml</code>파일에는 해당 사이트의 서비스에 필요한 옵션만 설정하여야한다. </p>
</blockquote>
<ul>
<li>메리어트 호텔의 경우를 예시로 나타낸다. <div class="fragment"><div class="line">move_sector:</div>
<div class="line">  ##### sertor 이동</div>
<div class="line">  sector_mode: none ##### 필수 파라미터</div>
<div class="line">elevator_control:</div>
<div class="line">  ##### 엘리베이터 이동</div>
<div class="line">  ## control_mode : 엘리베이터 제어 모드</div>
<div class="line">  # single : 엘리베이터 개별 제어</div>
<div class="line">  # multi : 엘리베이터 군 제어</div>
<div class="line">  control_mode: single ##### 필수 파라미터</div>
<div class="line">  ## elevator_num : 엘리베이터를 제어하기 위한 엘리베이터 번호</div>
<div class="line">  elevator_num: 5</div>
<div class="line">  ## ev 경로 실패시 재생성 시간 (초)</div>
<div class="line">  nav_recovery_time : 5.0</div>
<div class="line">  ## ev nav param</div>
<div class="line">  nav_param_before_ev:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.max_vel_x</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.4</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.sim_time</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 1.5</div>
<div class="line">  nav_param_after_ev:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.max_vel_x</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.55</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.sim_time</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 1.5</div>
<div class="line">  ## manipulation_outside_btn : 엘리베이터 외부 버튼의 매니퓰레이터로 조작 여부</div>
<div class="line">  # true or false</div>
<div class="line">  manipulation_outside_btn: false ##### 필수 파라미터</div>
<div class="line">  manipulation_inside_btn: false ##### 필수 파라미터</div>
<div class="line">alarm_to_customer:</div>
<div class="line">  ##### 고객에게 배송을 알리는 방법</div>
<div class="line">  ## alram_mode : 알림 방법 선택</div>
<div class="line">  # knock : 노크로 알림</div>
<div class="line">  # bell : 초인종 조작으로 알림</div>
<div class="line">  alarm_mode : bell ##### 필수 파라미터</div>
<div class="line"> </div>
<div class="line">  # Only when alarm_mode is bell</div>
<div class="line">  bell_mani_push_thres : 0.320</div>
<div class="line">  bell_mani_push_pos_x: 0.23 # m</div>
<div class="line">  bell_mani_goal_from_target:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: -0.23</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: 0.0</div>
<div class="line">  bell_mani_target_offset:</div>
<div class="line">    geometry_point:</div>
<div class="line">      x: 0.0</div>
<div class="line">      y: 0.0</div>
<div class="line">      z: -0.0145</div>
<div class="line">  bell_mani_prepare_x: -0.23</div>
<div class="line">  ########## end of alarm_mode:bell</div>
<div class="line">navigation:</div>
<div class="line">  ##### 주행 관련 파라미터</div>
<div class="line">  # MoveGoal 초기 세팅</div>
<div class="line">  # navigation 파라미터</div>
<div class="line">  init_nav_controller_params:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.max_vel_x</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.55</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.sim_time</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 1.5</div>
<div class="line">    ros_param:</div>
<div class="line">      name: FollowPath.xy_goal_tolerance</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.075</div>
<div class="line">    ros_param:</div>
<div class="line">      name: goal_checker.xy_goal_tolerance</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.15</div>
<div class="line">    ros_param:</div>
<div class="line">      name: goal_checker.yaw_goal_tolerance</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 3.0</div>
<div class="line">  init_nav_planner_params:</div>
<div class="line">    ros_param:</div>
<div class="line">      name: GridBased.tolerance</div>
<div class="line">      type: DOUBLE</div>
<div class="line">      value: 0.15</div>
<div class="line">  # navigation blackboard 아이템</div>
<div class="line">  preturn_angle_min : 30.0</div>
<div class="line">  default_nav_recovery_time : 5.0</div>
<div class="line">  xy_tol : 0.30</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md29"></a>
4.2 push_params</h3>
<p><code>push_params.yaml</code>에서는 매니퓰레이터로 Push 동작을 수행하는 버튼(혹은 자동문)을 누르는데 필요하 파라미터를 설정한다. 이 곳에 세팅되어있지 않는 target에 대한 파라미터라면 <code>service_option.yaml</code>에 설정된 Default 파라미터가 사용된다.</p><ul>
<li><code>push_params.yaml</code> <div class="fragment"><div class="line"># uuid:   각각의 데이터를 구분 할 고유 번호. 겹치지 않는 숫자를 넣으면 됨.</div>
<div class="line">#  *  target_name: bell</div>
<div class="line">#             푸시 동작을 할 대상(버튼)의 이름. 딥러닝 네트워크의 라벨링 이름과 동일해야한다.</div>
<div class="line">#             예) bell, tag, up, 3</div>
<div class="line">#  *  floor: [1, 2, 4, 5, 6]</div>
<div class="line">#             푸시 동작을 할 대상(버튼) 있는 층. 복수입력이 가능.</div>
<div class="line">#  *  dest: []</div>
<div class="line">#             현재 진행중인 작업의 최종 목적지. 동작을 하러가는 최종 목적지(poi의 key).</div>
<div class="line">#             bell의 경우 목적지에 따라 실제 버튼이 다르기 때문에 목적지가 필요하다.</div>
<div class="line">#             하나의 파라미터를 여러 목적지로 쓸수있으므로 복수 입력이 가능하고,</div>
<div class="line">#             값을 입력하지 않고, 빈 배열인 경우는 all의 의미로 목적지가 어디든 상관없이</div>
<div class="line">#             아래 파라미터를 적용한다.</div>
<div class="line">#  *  params:</div>
<div class="line">#         push_thres : 0.01</div>
<div class="line">#             매니퓰레이터 버튼 누를때 힘의 threshold</div>
<div class="line">#         push_pos_x: 0.18</div>
<div class="line">#             인식된 문의 위치를 기준으로 노크 모션이 진행 (default 0.03m 뒤에서 노크 진행)</div>
<div class="line">#         goal_from_target:</div>
<div class="line">#             x: 0.0</div>
<div class="line">#             y: 0.02</div>
<div class="line">#             z: 0.0</div>
<div class="line">#             매니튤레이터가 버튼 누르기 전 최종 이동 위치 (버튼 기준)</div>
<div class="line">#             x: 버튼을 관통하여 지나가는 방향, y: 버튼 좌우축 (좌측이 +), z: 버튼의 상하축(상방이 +)</div>
<div class="line">#        target_offset:</div>
<div class="line">#            x: 0.0</div>
<div class="line">#            y: 0.02</div>
<div class="line">#            z: 0.0</div>
<div class="line">#             버튼을 누르는 위치에 대한 offset</div>
<div class="line">#             x: 버튼을 관통하여 지나가는 방향, y: 버튼 좌우축 (좌측이 +), z: 버튼의 상하축(상방이 +)</div>
<div class="line">#  앞에 *가 표시된 항목에 대해서는 필수 적으로 입력해줘야하는 파라미터이고, 그외는 입력하지 않았다면, default값이 적용된다.</div>
<div class="line">###### 주석 종료</div>
<div class="line">0:</div>
<div class="line">    target_name: b1</div>
<div class="line">    floor: [b1, 1, 2, 3, 4, 5, 6]</div>
<div class="line">    dest: []</div>
<div class="line">    params:</div>
<div class="line">      push_thres: 0.01</div>
<div class="line">      push_pos_x: 0.0 # m</div>
<div class="line">      goal_from_target:</div>
<div class="line">          x: 0.0</div>
<div class="line">          y: 0.02</div>
<div class="line">          z: 0.0</div>
<div class="line">      target_offset:</div>
<div class="line">          x: 0.0</div>
<div class="line">          y: 0.02</div>
<div class="line">          z: 0.0</div>
<div class="line">1:</div>
<div class="line">    target_name: tag</div>
<div class="line">    floor: [1, 2, 3]</div>
<div class="line">    dest: []</div>
<div class="line">    params:</div>
<div class="line">      push_thres: 0.01</div>
<div class="line">      push_pos_x: 0.0 # m</div>
<div class="line">      goal_from_target:</div>
<div class="line">          x: 0.0</div>
<div class="line">          y: 0.02</div>
<div class="line">          z: 0.0</div>
<div class="line">      target_offset:</div>
<div class="line">          x: 0.0</div>
<div class="line">          y: 0.02</div>
<div class="line">          z: 0.0</div>
<div class="line">2:</div>
<div class="line">    target_name: tag</div>
<div class="line">    floor: [4, 5, 6]</div>
<div class="line">    dest: []</div>
<div class="line">    params:</div>
<div class="line">      push_thres: 0.01</div>
<div class="line">      push_pos_x: 0.0 # m</div>
<div class="line">      goal_from_target:</div>
<div class="line">          x: 0.0</div>
<div class="line">          y: 0.02</div>
<div class="line">          z: 0.0</div>
<div class="line">      target_offset:</div>
<div class="line">          x: 0.0</div>
<div class="line">          y: 0.02</div>
<div class="line">          z: 0.0</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md30"></a>
4.3 knock_params</h3>
<p><code>knock_params.yaml</code>에서는 매니퓰레이터로 Knock 동작을 수행하는 디 필요한 파라미터를 설정한다. 각각의 문에따라 다르게 설정할 수 있고, 방의이름(room_name)이 층의 정보를 포함하고 있다면, 층 정보를 빼고 뒤의 2자리만 사용한다. 이 곳에 세팅되어있지 않는 방에 대한 파라미터라면 <code>service_option.yaml</code>에 설정된 Default 파라미터가 사용된다.</p><ul>
<li><code>knock_params.yaml</code> <div class="fragment"><div class="line"># uuid:   각각의 데이터를 구분 할 고유 번호. 겹치지 않는 숫자를 넣으면 됨.</div>
<div class="line">#  *  room_name: 20</div>
<div class="line">#             노크 할 방의 호실 또는 이름.</div>
<div class="line">#             호실의 경우, 층을 나타내는 번호를 제외한 호실 값만 입력.</div>
<div class="line">#             예) 820호 -&gt; 20</div>
<div class="line">#  *  floor: [1, 2, 4, 5, 6]</div>
<div class="line">#             방이 있는 층. 복수입력이 가능.</div>
<div class="line">#  *  params:</div>
<div class="line">#         count: 3</div>
<div class="line">#             노크횟수 (똑똑 or 똑똑똑)</div>
<div class="line">#         position_rate: 0.8</div>
<div class="line">#             인식된 문의 위치를 기준으로 노크 모션이 진행 (default 0.03m 뒤에서 노크 진행)</div>
<div class="line">#             이를 기준으로 몇% 떨어진 거리에서 노크를 시작할 지에 대한 파라미터 (값이 커지면 커질수록 문에서 멀리서 시작함)</div>
<div class="line">#         direction:</div>
<div class="line">#             x: 0.03</div>
<div class="line">#             y: -0.01</div>
<div class="line">#             theta: 10.0</div>
<div class="line">#             노크 동작중 문을 두드리는 동작을 할때 매니퓰레이터의 knock tip을 움직이는 거리</div>
<div class="line">#             x: 전진방향, y: 상하방향, theta: 매니퓰레이터 손목스냅</div>
<div class="line">#  앞에 *가 표시된 항목에 대해서는 필수 적으로 입력해줘야하는 파라미터이고, 그외는 입력하지 않았다면, default값이 적용된다.</div>
<div class="line">###### 주석 종료</div>
<div class="line">0:</div>
<div class="line">    room_name: 1</div>
<div class="line">    floor: [1, 2, 3, 4, 5, 6]</div>
<div class="line">    params:</div>
<div class="line">      count : 3</div>
<div class="line">      position_rate: 0.8</div>
<div class="line">      direction:</div>
<div class="line">          x: 0.03</div>
<div class="line">          y: -0.01</div>
<div class="line">          theta: 10.0</div>
<div class="line">1:</div>
<div class="line">    room_name: 32</div>
<div class="line">    floor: [1, 2, 3]</div>
<div class="line">    params:</div>
<div class="line">      count : 3</div>
<div class="line">      position_rate: 0.8</div>
<div class="line">      direction:</div>
<div class="line">          x: 0.03</div>
<div class="line">          y: -0.01</div>
<div class="line">          theta: 10.0</div>
<div class="line">2:</div>
<div class="line">    room_name: 32</div>
<div class="line">    count : 3</div>
<div class="line">    params:</div>
<div class="line">      position_rate: 0.8</div>
<div class="line"> </div>
<div class="line">3:</div>
<div class="line">    room_name: pizza</div>
<div class="line">    count : 3</div>
<div class="line">    params:</div>
<div class="line">      direction:</div>
<div class="line">          x: 0.03</div>
<div class="line">          y: -0.01</div>
<div class="line">          theta: 10.0</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md31"></a>
4.4 door_detection</h3>
<p><code>door_detection.yaml</code>에서는 노크 혹은 초인동 동작시 문열림을 인식하는데 사용하는 파라미터를 설정한다.</p><ul>
<li><code>knock_params.yaml</code> <div class="fragment"><div class="line">aimbot_door_detection:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    check_time: 2.0</div>
<div class="line">    min_angle: -45.0</div>
<div class="line">    max_angle: 45.0</div>
<div class="line">    max_range: 1.5</div>
<div class="line">    threshold: 0.01</div>
<div class="line">    sample_num: 5</div>
<div class="line">    sim_3d: true</div>
<div class="line">    zone_angle: 7.5</div>
<div class="line">    relation_angle: 60.0</div>
<div class="line">    lidar_height: 0.2885</div>
<div class="line">    min_width: 0.2</div>
<div class="line">    opened_angle: 10.0</div>
<div class="line">    transform.robot_frame_id: &quot;base_footprint&quot;</div>
<div class="line">    transform.x: 0.0</div>
<div class="line">    transform.y: 0.0</div>
<div class="line">    transform.z: 0.2885</div>
<div class="line">    transform.roll: 3.141592</div>
<div class="line">    transform.pitch: 0.0</div>
<div class="line">    transform.yaw: 0.0</div>
<div class="line">    max_door_distance: 1.51</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md32"></a>
4.5 nav2</h3>
<p><code>nav2.yaml</code>에서는 네비게이션에 사용되는 파라미터를 설정한다.</p><ul>
<li><code>nav2.yaml</code> <div class="fragment"><div class="line">amcl:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: False</div>
<div class="line">    max_particles: 2000</div>
<div class="line">    min_particles: 500</div>
<div class="line">    pf_err: 0.03</div>
<div class="line">    pf_z: 0.99</div>
<div class="line">    recovery_alpha_fast: 0.0</div>
<div class="line">    recovery_alpha_slow: 0.0</div>
<div class="line">    resample_interval: 1</div>
<div class="line">    save_pose_rate: 0.5</div>
<div class="line">    transform_tolerance: 0.1 #1.0</div>
<div class="line">    update_min_d: 0.025 #0.05 #0.1</div>
<div class="line">    update_min_a: 0.025 #0.1  #0.025 #0.1</div>
<div class="line">    set_initial_pose: False</div>
<div class="line">    initial_pose:</div>
<div class="line">      x: -8.2</div>
<div class="line">      y: 30.5</div>
<div class="line">      z: 0.0</div>
<div class="line">      yaw: 0.0</div>
<div class="line"> </div>
<div class="line">    laser_min_range: -1.0</div>
<div class="line">    laser_max_range: -1.0</div>
<div class="line">    # laser_model_type: &quot;likelihood_field_prob&quot;</div>
<div class="line">    laser_model_type: &quot;likelihood_field&quot;</div>
<div class="line">    max_beams: 60 #45</div>
<div class="line">    do_beamskip: true</div>
<div class="line">    beam_skip_distance: 0.5</div>
<div class="line">    beam_skip_error_threshold: 0.9</div>
<div class="line">    beam_skip_threshold: 0.3</div>
<div class="line">    laser_likelihood_max_dist: 10.0 #3.0</div>
<div class="line">    z_hit: 0.95</div>
<div class="line">    z_max: 0.15 #0.05</div>
<div class="line">    z_short: 0.1 #0.05</div>
<div class="line">    z_rand: 0.05</div>
<div class="line">    sigma_hit: 0.1</div>
<div class="line">    lambda_short: 0.1</div>
<div class="line"> </div>
<div class="line">    robot_model_type: &quot;differential&quot;</div>
<div class="line">    alpha1: 0.1 #0.01  #0.5    # rotation noise from rotation components</div>
<div class="line">    alpha2: 0.05 #0.01 #0.2  #0.25  # rotation noise from transition components</div>
<div class="line">    alpha3: 0.05 #0.01 #0.2  #0.25  # transition noise from rotation components</div>
<div class="line">    alpha4: 0.05 #0.01 #0.1  #0.5    # transition noise from transition components</div>
<div class="line">    alpha5: 0.001</div>
<div class="line">    base_frame_id: &quot;base_footprint&quot;</div>
<div class="line">    odom_frame_id: &quot;odom&quot;</div>
<div class="line">    global_frame_id: &quot;map_current&quot;</div>
<div class="line">    tf_broadcast: true</div>
<div class="line">    first_map_only: false</div>
<div class="line"> </div>
<div class="line">amcl_map_client:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
<div class="line"> </div>
<div class="line">amcl_rclcpp_node:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
<div class="line"> </div>
<div class="line">bt_navigator:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
<div class="line">    global_frame: map_current</div>
<div class="line">    robot_base_frame: base_footprint</div>
<div class="line">    odom_topic: /odom</div>
<div class="line">    default_bt_xml_filename: &quot;navigate_w_replanning_and_recovery.xml&quot;</div>
<div class="line">    plugin_lib_names:</div>
<div class="line">      - nav2_compute_path_to_pose_action_bt_node</div>
<div class="line">      - nav2_follow_path_action_bt_node</div>
<div class="line">      - nav2_back_up_action_bt_node</div>
<div class="line">      - nav2_spin_action_bt_node</div>
<div class="line">      - nav2_wait_action_bt_node</div>
<div class="line">      - nav2_clear_costmap_service_bt_node</div>
<div class="line">      - nav2_is_stuck_condition_bt_node</div>
<div class="line">      - nav2_goal_reached_condition_bt_node</div>
<div class="line">      - nav2_goal_updated_condition_bt_node</div>
<div class="line">      - nav2_initial_pose_received_condition_bt_node</div>
<div class="line">      - nav2_reinitialize_global_localization_service_bt_node</div>
<div class="line">      - nav2_rate_controller_bt_node</div>
<div class="line">      - nav2_distance_controller_bt_node</div>
<div class="line">      - nav2_speed_controller_bt_node</div>
<div class="line">      - nav2_recovery_node_bt_node</div>
<div class="line">      - nav2_pipeline_sequence_bt_node</div>
<div class="line">      - nav2_round_robin_node_bt_node</div>
<div class="line">      - nav2_transform_available_condition_bt_node</div>
<div class="line">      - nav2_time_expired_condition_bt_node</div>
<div class="line">      - nav2_distance_traveled_condition_bt_node</div>
<div class="line"> </div>
<div class="line">bt_navigator_rclcpp_node:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
<div class="line"> </div>
<div class="line">controller_server:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: False</div>
<div class="line">    controller_frequency: 10.0 #20.0</div>
<div class="line">    min_x_velocity_threshold: 0.001</div>
<div class="line">    min_y_velocity_threshold: 0.001</div>
<div class="line">    min_theta_velocity_threshold: 0.001</div>
<div class="line"> </div>
<div class="line">    controller_plugins: [&quot;FollowPath&quot;]</div>
<div class="line">    # DWB parameters</div>
<div class="line">    FollowPath:</div>
<div class="line">      plugin: &quot;dwb_core::DWBLocalPlanner&quot;</div>
<div class="line">      debug_trajectory_details: True</div>
<div class="line">      min_vel_x: 0.0</div>
<div class="line">      min_vel_y: 0.0</div>
<div class="line">      max_vel_x: 0.55 #0.5</div>
<div class="line">      max_vel_y: 0.0</div>
<div class="line">      max_vel_theta: 0.75</div>
<div class="line">      min_speed_xy: 0.1 #0.0</div>
<div class="line">      max_speed_xy: 0.55 #0.5</div>
<div class="line">      min_speed_theta: 0.1</div>
<div class="line">      # Add high threshold velocity for turtlebot 3 issue.</div>
<div class="line">      # https://github.com/ROBOTIS-GIT/turtlebot3_simulations/issues/75</div>
<div class="line">      acc_lim_x: 0.1 #0.075  # 0.1  #0.2  #1.0  #4.0</div>
<div class="line">      acc_lim_y: 0.0 #0.5  #0.75  #4.0  # 32.0</div>
<div class="line">      decel_lim_x: -0.6 #-0.30</div>
<div class="line">      acc_lim_theta: 0.2 #0.3 4.0  #-16.0</div>
<div class="line">      decel_lim_y: 0.0</div>
<div class="line">      decel_lim_theta: -1.0 #-4.0  #-32.0</div>
<div class="line"> </div>
<div class="line">      # XY Theta Iterator</div>
<div class="line">      vx_samples: 30 #30</div>
<div class="line">      vy_samples: 0</div>
<div class="line">      vtheta_samples: 60 # 90 #30</div>
<div class="line"> </div>
<div class="line">      # Standard Trajectory Generator</div>
<div class="line">      sim_time: 2.5 #2.0</div>
<div class="line">      discretize_by_time: False</div>
<div class="line">      time_granularity: 0.025 #0.5</div>
<div class="line">      linear_granularity: 0.025 #0.5</div>
<div class="line">      angular_granularity: 0.025 #0.5  #0.025</div>
<div class="line">      transform_tolerance: 0.5</div>
<div class="line">      include_last_point: True</div>
<div class="line"> </div>
<div class="line">      # Critics</div>
<div class="line">      short_circuit_trajectory_evaluation: False</div>
<div class="line">      stateful: True</div>
<div class="line">      critics:</div>
<div class="line">        [</div>
<div class="line">          &quot;RotateToGoal&quot;,</div>
<div class="line">          &quot;RotateToPath&quot;,</div>
<div class="line">          &quot;Oscillation&quot;,</div>
<div class="line">          &quot;BaseObstacle&quot;,</div>
<div class="line">          &quot;GoalAlign&quot;,</div>
<div class="line">          &quot;PathAlign&quot;,</div>
<div class="line">          &quot;PathDist&quot;,</div>
<div class="line">          &quot;GoalDist&quot;,</div>
<div class="line">        ]</div>
<div class="line">      BaseObstacle.scale: 0.02</div>
<div class="line">      #      BaseObstacle.sum_scores: True</div>
<div class="line">      PathAlign.scale: 32.0</div>
<div class="line">      PathAlign.forward_point_distance: 0.1</div>
<div class="line">      GoalAlign.scale: 24.0</div>
<div class="line">      GoalAlign.forward_point_distance: 0.1</div>
<div class="line">      PathDist.scale: 32.0</div>
<div class="line">      GoalDist.scale: 48.0 #24.0</div>
<div class="line">      # Rotate To Goal Critics</div>
<div class="line">      xy_goal_tolerance: 0.075 #0.15  #0.1  #0.2  #0.1</div>
<div class="line">      trans_stopped_velocity: 0.05</div>
<div class="line">      RotateToGoal.scale: 48.0 #32.0</div>
<div class="line">      RotateToGoal.slowing_factor: 2.0 #5.0</div>
<div class="line">      RotateToGoal.lookahead_time: -1.0</div>
<div class="line">      RotateToPath.theta_tolerance: 30.0</div>
<div class="line">      RotateToPath.trans_in_window_velocity: 0.25</div>
<div class="line">      RotateToPath.slowing_factor: 5.0</div>
<div class="line">      RotateToPath.lookahead_time: -1.0</div>
<div class="line">      RotateToPath.lookahead_distance: 0.25</div>
<div class="line">    #      PreferDirection.penalty: 1.0</div>
<div class="line">    #      PreferDirection.prefer_right: True</div>
<div class="line">    #      PreferDirection.scale: 1.0</div>
<div class="line"> </div>
<div class="line">    # Goal checker parameters</div>
<div class="line">    goal_checker_plugin: &quot;goal_checker&quot;</div>
<div class="line">    goal_checker:</div>
<div class="line">      plugin: &quot;nav2_controller::SimpleGoalChecker&quot;</div>
<div class="line">      stateful: True</div>
<div class="line">      xy_goal_tolerance: 0.1 #0.2  #0.15  #0.25</div>
<div class="line">      yaw_goal_tolerance: 0.1 #0.075  #0.1</div>
<div class="line"> </div>
<div class="line">    # Progress checker parameters</div>
<div class="line">    progress_checker_plugin: &quot;progress_checker&quot;</div>
<div class="line">    progress_checker:</div>
<div class="line">      plugin: &quot;nav2_controller::SimpleProgressChecker&quot;</div>
<div class="line">      required_movement_radius: 0.2 #0.5</div>
<div class="line">      movement_time_allowance: 30.0 #10.0</div>
<div class="line"> </div>
<div class="line">controller_server_rclcpp_node:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
<div class="line"> </div>
<div class="line">local_costmap:</div>
<div class="line">  local_costmap:</div>
<div class="line">    ros__parameters:</div>
<div class="line">      update_frequency: 10.0</div>
<div class="line">      publish_frequency: 10.0</div>
<div class="line">      global_frame: odom</div>
<div class="line">      robot_base_frame: base_footprint</div>
<div class="line">      use_sim_time: True</div>
<div class="line">      rolling_window: true</div>
<div class="line">      width: 5</div>
<div class="line">      height: 5</div>
<div class="line">      resolution: 0.05</div>
<div class="line">      robot_radius: 0.33</div>
<div class="line">      transform_tolerance: 0.1 # 0.3</div>
<div class="line">      track_unknown_space: False</div>
<div class="line">      plugins: [&quot;obstacle_layer&quot;, &quot;voxel_layer&quot;, &quot;inflation_layer&quot;]</div>
<div class="line">      # plugins: [&quot;obstacle_layer&quot;, &quot;range_sensor_layer&quot;, &quot;voxel_layer&quot;, &quot;inflation_layer&quot;]</div>
<div class="line">      # plugins: [&quot;obstacle_layer&quot;, &quot;inflation_layer&quot;]</div>
<div class="line">      range_sensor_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::RangeSensorLayer&quot;</div>
<div class="line">        enabled: True</div>
<div class="line">        phi: 0.4</div>
<div class="line">        inflate_cone: 1.0</div>
<div class="line">        # no_readings_timeout: 2.0</div>
<div class="line">        # clear_threshold: 0.2</div>
<div class="line">        # mark_threshold: 0.5</div>
<div class="line">        clear_on_max_reading: True</div>
<div class="line">        # topics: [&quot;/ultrasonic&quot;, &quot;/ultrasonic2&quot;, &quot;/ultrasonic8&quot;]</div>
<div class="line">        topics: [&quot;/aimbot_base/ultrasonic1&quot;]</div>
<div class="line">        input_sensor_type: ALL</div>
<div class="line">        max_check_range: 0.6</div>
<div class="line">      inflation_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::InflationLayer&quot;</div>
<div class="line">        inflation_radius: 1.0</div>
<div class="line">        cost_scaling_factor: 4.0</div>
<div class="line">        inflate_around_unknown: False</div>
<div class="line">      obstacle_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::ObstacleLayer&quot;</div>
<div class="line">        enabled: True</div>
<div class="line">        observation_sources: scan</div>
<div class="line">        scan:</div>
<div class="line">          topic: /scan</div>
<div class="line">          max_obstacle_height: 1.0</div>
<div class="line">          clearing: True</div>
<div class="line">          marking: True</div>
<div class="line">          data_type: &quot;LaserScan&quot;</div>
<div class="line">          obstacle_range: 3.0</div>
<div class="line">          raytrace_range: 3.5</div>
<div class="line">          inf_is_valid: True</div>
<div class="line">      voxel_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::VoxelLayer&quot;</div>
<div class="line">        enabled: False</div>
<div class="line">        publish_voxel_map: True</div>
<div class="line">        origin_z: 0.0</div>
<div class="line">        z_resolution: 0.1</div>
<div class="line">        z_voxels: 3</div>
<div class="line">        max_obstacle_height: 0.3</div>
<div class="line">        mark_threshold: 0</div>
<div class="line">        observation_sources: pointcloud</div>
<div class="line">        pointcloud:</div>
<div class="line">          topic: /camera/aligned_depth_to_color/color/points</div>
<div class="line">          # observation_persistence: 1.0</div>
<div class="line">          min_obstacle_height: 0.05</div>
<div class="line">          max_obstacle_height: 0.3</div>
<div class="line">          clearing: True</div>
<div class="line">          marking: True</div>
<div class="line">          # obstacle_range: 5.0</div>
<div class="line">          # raytrace_range: 5.5</div>
<div class="line">          data_type: &quot;PointCloud2&quot;</div>
<div class="line">      static_layer:</div>
<div class="line">        map_subscribe_transient_local: True</div>
<div class="line">      always_send_full_costmap: True</div>
<div class="line">  local_costmap_client:</div>
<div class="line">    ros__parameters:</div>
<div class="line">      use_sim_time: True</div>
<div class="line">  local_costmap_rclcpp_node:</div>
<div class="line">    ros__parameters:</div>
<div class="line">      use_sim_time: True</div>
<div class="line"> </div>
<div class="line">global_costmap:</div>
<div class="line">  global_costmap:</div>
<div class="line">    ros__parameters:</div>
<div class="line">      update_frequency: 10.0 # 1.0</div>
<div class="line">      publish_frequency: 10.0 # 1.0</div>
<div class="line">      global_frame: map_current</div>
<div class="line">      robot_base_frame: base_link</div>
<div class="line">      use_sim_time: True</div>
<div class="line">      robot_radius: 0.33</div>
<div class="line">      resolution: 0.05</div>
<div class="line">      lethal_cost_threshold: 70</div>
<div class="line">      transform_tolerance: 0.1 # 0.3</div>
<div class="line">      track_unknown_space: True</div>
<div class="line">      plugins:</div>
<div class="line">        [&quot;static_layer&quot;, &quot;obstacle_layer&quot;, &quot;voxel_layer&quot;, &quot;inflation_layer&quot;]</div>
<div class="line">      # plugins: [&quot;static_layer&quot;, &quot;obstacle_layer&quot;, &quot;range_sensor_layer&quot;, &quot;inflation_layer&quot;]</div>
<div class="line">      range_sensor_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::RangeSensorLayer&quot;</div>
<div class="line">        enabled: True</div>
<div class="line">        phi: 0.4</div>
<div class="line">        inflate_cone: 1.0</div>
<div class="line">        # no_readings_timeout: 2.0</div>
<div class="line">        # clear_threshold: 0.2</div>
<div class="line">        # mark_threshold: 0.5</div>
<div class="line">        clear_on_max_reading: True</div>
<div class="line">        # topics: [&quot;/ultrasonic&quot;, &quot;/ultrasonic2&quot;, &quot;/ultrasonic8&quot;]</div>
<div class="line">        topics: [&quot;/aimbot_base/ultrasonic1&quot;]</div>
<div class="line">        input_sensor_type: ALL</div>
<div class="line">        max_check_range: 0.6</div>
<div class="line">      obstacle_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::ObstacleLayer&quot;</div>
<div class="line">        enabled: True</div>
<div class="line">        combination_method: 2 # update with max except no information</div>
<div class="line">        observation_sources: scan</div>
<div class="line">        scan:</div>
<div class="line">          topic: /scan</div>
<div class="line">          max_obstacle_height: 1.0</div>
<div class="line">          clearing: True</div>
<div class="line">          marking: True</div>
<div class="line">          data_type: &quot;LaserScan&quot;</div>
<div class="line">          obstacle_range: 4.0</div>
<div class="line">          raytrace_range: 4.5</div>
<div class="line">          inf_is_valid: True</div>
<div class="line">        pointcloud:</div>
<div class="line">          topic: /camera/aligned_depth_to_color/color/points</div>
<div class="line">          # sensor_frame: &quot;camera_color_optical_frame&quot;</div>
<div class="line">          min_obstacle_height: 0.05</div>
<div class="line">          max_obstacle_height: 0.3</div>
<div class="line">          data_type: &quot;PointCloud2&quot;</div>
<div class="line">      voxel_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::VoxelLayer&quot;</div>
<div class="line">        enabled: False</div>
<div class="line">        publish_voxel_map: True</div>
<div class="line">        origin_z: 0.0</div>
<div class="line">        z_resolution: 0.1</div>
<div class="line">        z_voxels: 5</div>
<div class="line">        max_obstacle_height: 0.3</div>
<div class="line">        mark_threshold: 0</div>
<div class="line">        observation_sources: pointcloud</div>
<div class="line">        pointcloud:</div>
<div class="line">          topic: /camera/aligned_depth_to_color/color/points</div>
<div class="line">          min_obstacle_height: 0.05</div>
<div class="line">          max_obstacle_height: 0.3</div>
<div class="line">          clearing: True</div>
<div class="line">          marking: True</div>
<div class="line">          data_type: &quot;PointCloud2&quot;</div>
<div class="line">      static_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::StaticLayer&quot;</div>
<div class="line">        # enabled: True</div>
<div class="line">        map_topic: &quot;/map&quot;</div>
<div class="line">        subscribe_to_updates: True</div>
<div class="line">        map_subscribe_transient_local: True</div>
<div class="line">      inflation_layer:</div>
<div class="line">        plugin: &quot;nav2_costmap_2d::InflationLayer&quot;</div>
<div class="line">        inflation_radius: 1.1</div>
<div class="line">        cost_scaling_factor: 3.0</div>
<div class="line">        inflate_unknown: False</div>
<div class="line">        inflate_around_unknown: True</div>
<div class="line">      always_send_full_costmap: True</div>
<div class="line">  global_costmap_client:</div>
<div class="line">    ros__parameters:</div>
<div class="line">      use_sim_time: True</div>
<div class="line">  global_costmap_rclcpp_node:</div>
<div class="line">    ros__parameters:</div>
<div class="line">      use_sim_time: True</div>
<div class="line"> </div>
<div class="line">map_server:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
<div class="line">    yaml_filename: &quot;turtlebot3_world.yaml&quot;</div>
<div class="line">    frame_id: map_current</div>
<div class="line"> </div>
<div class="line">map_saver:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
<div class="line">    save_map_timeout: 5000</div>
<div class="line">    free_thresh_default: 0.25</div>
<div class="line">    occupied_thresh_default: 0.65</div>
<div class="line"> </div>
<div class="line">planner_server:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    expected_planner_frequency: 10.0 #15.0  #20.0</div>
<div class="line">    use_sim_time: True</div>
<div class="line">    planner_plugins: [&quot;GridBased&quot;]</div>
<div class="line">    GridBased:</div>
<div class="line">      plugin: &quot;nav2_navfn_planner/NavfnPlanner&quot;</div>
<div class="line">      tolerance: 0.15 #1.0  #0.5</div>
<div class="line">      use_astar: false</div>
<div class="line">      allow_unknown: false</div>
<div class="line"> </div>
<div class="line">planner_server_rclcpp_node:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
<div class="line"> </div>
<div class="line">recoveries_server:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    costmap_topic: local_costmap/costmap_raw</div>
<div class="line">    footprint_topic: local_costmap/published_footprint</div>
<div class="line">    cycle_frequency: 10.0</div>
<div class="line">    recovery_plugins: [&quot;spin&quot;, &quot;backup&quot;, &quot;wait&quot;]</div>
<div class="line">    spin:</div>
<div class="line">      plugin: &quot;nav2_recoveries/Spin&quot;</div>
<div class="line">    backup:</div>
<div class="line">      plugin: &quot;nav2_recoveries/BackUp&quot;</div>
<div class="line">    wait:</div>
<div class="line">      plugin: &quot;nav2_recoveries/Wait&quot;</div>
<div class="line">    global_frame: odom</div>
<div class="line">    robot_base_frame: base_link</div>
<div class="line">    transform_timeout: 0.1</div>
<div class="line">    use_sim_time: true</div>
<div class="line">    simulate_ahead_time: 2.0</div>
<div class="line">    max_rotational_vel: 1.0</div>
<div class="line">    min_rotational_vel: 0.4</div>
<div class="line">    rotational_acc_lim: 3.2</div>
<div class="line"> </div>
<div class="line">robot_state_publisher:</div>
<div class="line">  ros__parameters:</div>
<div class="line">    use_sim_time: True</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md33"></a>
4.6 demo</h3>
<p><code>demo.yaml</code>에서는 로봇을 데모모드로 사용하는 경우에 필요한 세팅을 한다. 데모모드를 사용하기 위해서는 환경변수에 아래와 같은 내용이 추가되어야 한다. </p><div class="fragment"><div class="line">export SERVICE_MODE=DEMO    # SERVICE, DEMO</div>
<div class="line">export START_PAGE=Demo      # 로봇 초기화 후 설정할 시작페이지(ex. Waiting, Demo)</div>
</div><!-- fragment --><ul>
<li><code>demo.yaml</code> <div class="fragment"><div class="line">interval : 60     # 데모 작업 실행 주기, 충전 중 아무 작업도 수행하지 않을 때 체크</div>
<div class="line">demo :            # 데모 작업</div>
<div class="line">  task_name : Demo</div>
<div class="line">  tree_name : demo.xml</div>
<div class="line">  tree_name_on_failure : demo_on_failuer.xml</div>
<div class="line">  tree_name_on_cancel : demo_on_cancel.xml</div>
<div class="line">  blackboard_data :</div>
<div class="line">    key : [target_name, tray_num]</div>
<div class="line">    type : [STRING, STRING]     # BOOL, INT, DOUBLE, STRING, GEOMETRY_MSGS_POSE2D, GEOMETRY_MSGS_POSE, DOUBLE_VECTOR, STRING_VECTOR</div>
<div class="line">    value : [102, 1]</div>
</div><!-- fragment --> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
